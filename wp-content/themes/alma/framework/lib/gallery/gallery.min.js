jQuery.loadImage=function(e){var t=function(t){function a(){o(),t.resolve(r)}function i(){o(),t.reject(r)}function o(){r.onload=null,r.onerror=null,r.onabort=null}var r=new Image;r.onload=a,r.onerror=i,r.onabort=i,r.src=e};return jQuery.Deferred(t).promise()},jQuery(function(){function show_photos_static(){gallery.find("a").addClass("static")}function show_photos_with_animation_tl(){for(var e=gallery.find("a"),t=0;max_w_photos+max_h_photos>t;t++)for(var a=t,i=0;max_h_photos>i&&!(i*max_w_photos>a);i++)!function(a){setTimeout(function(){e.eq(a).addClass("show")},50*t)}(a),a+=max_w_photos-1}function show_photos_with_animation_br(){for(var e=gallery.find("a"),t=0;max_w_photos+max_h_photos>t;t++)for(var a=per_page-t,i=max_h_photos-1;i>=0&&!(a>(i+1)*max_w_photos-1);i--)!function(a){setTimeout(function(){e.eq(a).addClass("show")},50*t)}(a),a-=max_w_photos-1}function get_per_page(){return 0==page?per_page-1:get_page_start()+per_page-1>data.length-1?per_page-1:per_page-2}function get_page_start(e){return void 0===e&&(e=page),0==e?0:(per_page-2)*e+1}function is_next_page(){return data.length>get_page_start(page+1)}function is_prev_page(){return page>0}var page=0,per_page=100,photo_default_size=150,picture_width=photo_default_size,picture_height=photo_default_size,max_w_photos,max_h_photos;data=[];var win=jQuery(window),loading=jQuery(".template-gallery-loading"),gallery=jQuery(".template-gallery"),lightwindow=jQuery(".template-gallery").attr("data-window"),data_images=jQuery(".template-gallery").attr("data-images"),gallery_images=eval(data_images);response=jQuery.parseJSON(gallery_images),null!==response&&(data=response.data),gallery.trigger("data-ready"),gallery.on("data-ready window-resized page-turned",function(e,t){var a=[],i=[];gallery.trigger("loading");var o=data.slice(get_page_start(),get_page_start()+get_per_page());return jQuery.each(o,function(){i.push(jQuery.loadImage(this.thumb)),""!=lightwindow?a.push('<a href="'+this.large+'" class="'+("swipebox"==lightwindow?lightwindow:"")+'"style="width:'+picture_width+"px;height:"+picture_height+"px;background-image:url("+this.thumb+')"><img src="'+this.thumb+'" width="'+picture_width+'" height="'+picture_height+'"></a>'):a.push('<a style="width:'+picture_width+"px;height:"+picture_height+"px;background-image:url("+this.thumb+')"></a>')}),is_prev_page()&&a.unshift('<a class="prev" style="width:'+picture_width+"px;height:"+picture_height+'px;"></a>'),is_next_page()&&a.push('<a class="next" style="width:'+picture_width+"px;height:"+picture_height+'px;"></a>'),a.length?(jQuery.when.apply(jQuery,i).always(function(){"window-resized"==e.type?(gallery.html(a.join("")),show_photos_with_animation_tl(),"swipebox"==lightwindow&&jQuery(".template-gallery .swipebox").swipebox(),"magnificPopup"==lightwindow&&jQuery(".template-gallery.magnificPopup").magnificPopup({delegate:"a[href]",type:"image",mainClass:"mfp-with-zoom mfp-img-mobile",gallery:{enabled:!0},zoom:{enabled:!0,duration:300,opener:function(e){return e.find("img").parent()}}})):gallery.fadeOut(function(){gallery.html(a.join("")),"page-turned"==e.type&&"br"==t?show_photos_with_animation_br():show_photos_with_animation_tl(),"swipebox"==lightwindow&&jQuery(".template-gallery .swipebox").swipebox(),"magnificPopup"==lightwindow&&jQuery(".template-gallery.magnificPopup").magnificPopup({delegate:"a[href]",type:"image",mainClass:"mfp-with-zoom mfp-img-mobile",gallery:{enabled:!0},zoom:{enabled:!0,duration:300,opener:function(e){return e.find("img")}}}),gallery.show()}),gallery.trigger("loading-finished")}),void 0):!1}),gallery.on("loading",function(){loading.show()}),gallery.on("loading-finished",function(){loading.hide()}),gallery.on("click",".next",function(){page++,gallery.trigger("page-turned",["br"])}),gallery.on("click",".prev",function(){page--,gallery.trigger("page-turned",["tl"])}),win.on("resize",function(){var e,t,a,i=jQuery(".template-gallery-wrapper").width(),o=jQuery(".template-gallery").height();max_w_photos=Math.ceil(i/photo_default_size),a=(max_w_photos*photo_default_size-i)/max_w_photos,picture_width=Math.ceil(photo_default_size-a),e=max_w_photos*picture_width,max_h_photos=Math.ceil(o/photo_default_size),a=(max_h_photos*photo_default_size-o)/max_h_photos,picture_height=Math.ceil(photo_default_size-a),t=max_h_photos*picture_height,per_page=max_w_photos*max_h_photos,gallery.width(e).height(t),gallery.trigger("window-resized")}).resize()});