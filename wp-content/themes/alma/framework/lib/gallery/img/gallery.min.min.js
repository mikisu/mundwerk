jQuery.loadImage=function(e){var t=function(t){function n(){i(),t.resolve(s)}function r(){i(),t.reject(s)}function i(){s.onload=null,s.onerror=null,s.onabort=null}var s=new Image;s.onload=n,s.onerror=r,s.onabort=r,s.src=e};return jQuery.Deferred(t).promise()},jQuery(function(){function e(){for(var e=v.find("a"),t=0;o+u>t;t++)for(var n=t,r=0;u>r&&!(r*o>n);r++)!function(n){setTimeout(function(){e.eq(n).addClass("show")},50*t)}(n),n+=o-1}function t(){for(var e=v.find("a"),t=0;o+u>t;t++)for(var n=f-t,r=u-1;r>=0&&!(n>(r+1)*o-1);r--)!function(n){setTimeout(function(){e.eq(n).addClass("show")},50*t)}(n),n-=o-1}function n(){return 0==a?f-1:r()+f-1>data.length-1?f-1:f-2}function r(e){return void 0===e&&(e=a),0==e?0:(f-2)*e+1}function i(){return data.length>r(a+1)}function s(){return a>0}var o,u,a=0,f=100,l=150,c=l,h=l;data=[];var p=jQuery(window),d=jQuery(".template-gallery-loading"),v=jQuery(".template-gallery");response=jQuery.parseJSON(gallery_images),data=response.data,v.trigger("data-ready"),v.on("data-ready window-resized page-turned",function(o,u){var a=[],f=[];v.trigger("loading");var l=data.slice(r(),r()+n());return jQuery.each(l,function(){f.push(jQuery.loadImage(this.thumb)),a.push('<a href="'+this.large+'" class="swipebox"'+'style="width:'+c+"px;height:"+h+"px;background-image:url("+this.thumb+')">'+"</a>")}),s()&&a.unshift('<a class="prev" style="width:'+c+"px;height:"+h+'px;"></a>'),i()&&a.push('<a class="next" style="width:'+c+"px;height:"+h+'px;"></a>'),a.length?(jQuery.when.apply(jQuery,f).always(function(){"window-resized"==o.type?(v.html(a.join("")),e(),jQuery(".template-gallery .swipebox").swipebox()):v.fadeOut(function(){v.html(a.join("")),"page-turned"==o.type&&"br"==u?t():e(),jQuery(".template-gallery .swipebox").swipebox(),v.show()}),v.trigger("loading-finished")}),void 0):!1}),v.on("loading",function(){d.show()}),v.on("loading-finished",function(){d.hide()}),v.on("click",".next",function(){a++,v.trigger("page-turned",["br"])}),v.on("click",".prev",function(){a--,v.trigger("page-turned",["tl"])}),p.on("resize",function(){var e,t,n,r=p.width(),i=p.height();i=jQuery(".template-gallery").height(),o=Math.ceil(r/l),n=(o*l-r)/o,c=Math.ceil(l-n),e=o*c,u=Math.ceil(i/l),n=(u*l-i)/u,h=Math.ceil(l-n),t=u*h,f=o*u,v.width(e).height(t),v.trigger("window-resized")}).resize()});